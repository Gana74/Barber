# KODA.md ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–ù–∞–∑–≤–∞–Ω–∏–µ:** Barber Telegram Bot

**–¢–∏–ø:** Telegram-–±–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**

- Node.js 18+
- Telegraf 4.x ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram-–±–æ—Ç–æ–≤
- telegraf-session-local ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π
- Google Sheets API (googleapis) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- node-cron ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- dayjs + –ø–ª–∞–≥–∏–Ω—ã (utc, timezone) ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –∏ —Ç–∞–π–º–∑–æ–Ω–∞–º–∏
- dotenv ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ú–æ–¥—É–ª—å–Ω–∞—è, —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã (–ª–æ–≥–∏–∫–∞) –∏ –±–æ—Ç (UI/–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ).

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ index.js              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ npm-—Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ MANAGER.md            # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–∞–ª–æ–Ω–∞
‚îú‚îÄ‚îÄ sessions.json         # –§–∞–π–ª —Å–µ—Å—Å–∏–π (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å)
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ bot/
    ‚îÇ   ‚îú‚îÄ‚îÄ index.js      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
    ‚îÇ   ‚îî‚îÄ‚îÄ scenes/
    ‚îÇ       ‚îî‚îÄ‚îÄ bookingScene.js  # Wizard-—Å—Ü–µ–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
    ‚îú‚îÄ‚îÄ config/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.js      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥—É–±–ª–∏—Ä—É–µ—Ç index.js, —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
    ‚îî‚îÄ‚îÄ services/
        ‚îú‚îÄ‚îÄ googleSheets.js   # CRUD –¥–ª—è Google Sheets, –∫—ç—à
        ‚îú‚îÄ‚îÄ booking.js        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: —É—Å–ª—É–≥–∏, —Å–ª–æ—Ç—ã, –∑–∞–ø–∏—Å—å
        ‚îî‚îÄ‚îÄ reminders.js      # Cron-–∑–∞–¥–∞—á–∏ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
```

---

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ
npm start

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
# –∏–ª–∏
$env:NODE_ENV = "development"
node index.js
```

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pm2:

```powershell
pm2 start index.js --name barber-bot
pm2 restart barber-bot
pm2 logs barber-bot
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è            | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| --------------------- | ----------- | -------------------------------------------------- |
| `BOT_TOKEN`           | –î–∞          | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –æ—Ç @BotFather                  |
| `GOOGLE_SHEETS_ID`    | –î–∞          | ID Google Sheets —Ç–∞–±–ª–∏—Ü—ã                           |
| `GOOGLE_CLIENT_EMAIL` | –î–∞          | Email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google                   |
| `GOOGLE_PRIVATE_KEY`  | –î–∞          | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (—Å `\n`)        |
| `DEFAULT_TIMEZONE`    | –ù–µ—Ç         | –¢–∞–π–º–∑–æ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–ø—Ä. `Asia/Yekaterinburg`) |
| `MANAGER_CHAT_ID`     | –ù–µ—Ç         | Telegram Chat ID –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π         |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

### –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (`index.js`)

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ `initConfig()`
2. –°–æ–∑–¥–∞—ë—Ç —Å–µ—Ä–≤–∏—Å Google Sheets —á–µ—Ä–µ–∑ `createSheetsService(config)`
3. –°–æ–∑–¥–∞—ë—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `createBot({ config, sheetsService })`
4. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —á–µ—Ä–µ–∑ `setupReminders()`
5. –ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `bot.launch()`

### –°–µ—Ä–≤–∏—Å Google Sheets (`src/services/googleSheets.js`)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –≤ Google Sheets.

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

- `ensureSheetsStructure()` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ª–∏—Å—Ç—ã –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ –∞—Ä—Ö–∏–≤
- `getDaySchedule(dateStr)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–µ–Ω—å (—Å in‚Äëmemory –∫—ç—à–µ–º, —á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏)
- `appendAppointment(appointment)` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ
- `updateAppointmentStatus(id, status, meta)` ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ (–∏—â–µ—Ç –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∞—Ä—Ö–∏–≤–µ)
- `getTimezone()` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç —Ç–∞–π–º–∑–æ–Ω—É –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–∞–±–ª–∏—Ü—ã
- `archiveOldAppointments(monthsToKeep)` ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤ –∞—Ä—Ö–∏–≤
- `migrateExistingDataToArchive(monthsToKeep)` ‚Äî –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∞—Ä—Ö–∏–≤

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –ü—Ä–æ—Å—Ç–æ–π in‚Äëmemory –∫—ç—à –ø–æ –¥–∞—Ç–∞–º (`dayCache`) —Å TTL ~30 –º–∏–Ω—É—Ç. –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ `invalidateDayCache()` –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —á–∏—Å—Ç–∏—Ç—Å—è —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π (–µ–∂–µ—á–∞—Å–Ω–∞—è cron‚Äë–æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∫–ª—é—á–µ–π).
- –ö—ç—à —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ (`workHoursCache`) —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç TTL ~30 –º–∏–Ω—É—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∏/–∏–ª–∏ –ø—Ä–∏ —Ñ–æ–Ω–æ–≤–æ–π –æ—á–∏—Å—Ç–∫–µ.

**–°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è:**

- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ó–∞–ø–∏—Å–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ (–ª–∏—Å—Ç `–ó–∞–ø–∏—Å–∏`, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –º–µ—Å—è—Ü–∞) –∏ –∞—Ä—Ö–∏–≤–Ω—ã–µ (–ª–∏—Å—Ç `–ó–∞–ø–∏—Å–∏_–ê—Ä—Ö–∏–≤`, —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã (`getDaySchedule()`, `getAppointmentsByDate()`, `getAllActiveAppointments()`) —á–∏—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–¥–∏–∞–ø–∞–∑–æ–Ω A2:Q500 –≤–º–µ—Å—Ç–æ A2:Q2000), —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤ 3-5 —Ä–∞–∑
- **–ú–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞:** `getAppointmentById()`, `getAppointmentByCancelCode()`, `updateAppointmentStatus()` –∏—â—É—Ç —Å–Ω–∞—á–∞–ª–∞ –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö, –∑–∞—Ç–µ–º –≤ –∞—Ä—Ö–∏–≤–µ
- **–ê–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã:** `getCompletedAppointments()`, `getCancelledAppointmentsInPeriod()`, `getAllAppointmentsForClient()`, `getClientsFor21DayReminder()` –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–æ–∏—Ö –ª–∏—Å—Ç–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è:** –ï–∂–µ–º–µ—Å—è—á–Ω–æ –≤ 3:00 –Ω–æ—á–∏ (1-–≥–æ —á–∏—Å–ª–∞) –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:**
| –õ–∏—Å—Ç | –ö–æ–ª–æ–Ω–∫–∏ |
|------|---------|
| `–ù–∞—Å—Ç—Ä–æ–π–∫–∏` | –ö–ª—é—á, –ó–Ω–∞—á–µ–Ω–∏–µ |
| `–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ` | –î–∞—Ç–∞, –í—Ä–µ–º—è*–Ω–∞—á–∞–ª–∞, –í—Ä–µ–º—è*–æ–∫–æ–Ω—á–∞–Ω–∏—è, –°—Ç–∞—Ç—É—Å, –£—Å–ª—É–≥–∞, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| `–ó–∞–ø–∏—Å–∏` | ID*–∑–∞–ø–∏—Å–∏, –°–æ–∑–¥–∞–Ω–æ_UTC, –£—Å–ª—É–≥–∞, –¶–µ–Ω–∞, –î–∞—Ç–∞, –í—Ä–µ–º—è*–Ω–∞—á–∞–ª–∞, –í—Ä–µ–º—è*–æ–∫–æ–Ω—á–∞–Ω–∏—è, –ò–º—è*–∫–ª–∏–µ–Ω—Ç–∞, –¢–µ–ª–µ—Ñ–æ–Ω, Username*Telegram, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –°—Ç–∞—Ç—É—Å, –ö–æ–¥*–æ—Ç–º–µ–Ω—ã, Telegram*ID, –ò—Å–ø–æ–ª–Ω–µ–Ω–æ_UTC, –û—Ç–º–µ–Ω–µ–Ω–æ_UTC |
| `–ó–∞–ø–∏—Å–∏_–ê—Ä—Ö–∏–≤` | ID*–∑–∞–ø–∏—Å–∏, –°–æ–∑–¥–∞–Ω–æ_UTC, –£—Å–ª—É–≥–∞, –¶–µ–Ω–∞, –î–∞—Ç–∞, –í—Ä–µ–º—è*–Ω–∞—á–∞–ª–∞, –í—Ä–µ–º—è*–æ–∫–æ–Ω—á–∞–Ω–∏—è, –ò–º—è*–∫–ª–∏–µ–Ω—Ç–∞, –¢–µ–ª–µ—Ñ–æ–Ω, Username*Telegram, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –°—Ç–∞—Ç—É—Å, –ö–æ–¥*–æ—Ç–º–µ–Ω—ã, Telegram*ID, –ò—Å–ø–æ–ª–Ω–µ–Ω–æ_UTC, –û—Ç–º–µ–Ω–µ–Ω–æ_UTC |
| `–ö–ª–∏–µ–Ω—Ç—ã` | ID*–∫–ª–∏–µ–Ω—Ç–∞, –ü–µ—Ä–≤–æ–µ*–ø–æ—Å–µ—â–µ–Ω–∏–µ_UTC, Telegram_ID, Username_Telegram, –ò–º—è, –¢–µ–ª–µ—Ñ–æ–Ω, –ü–æ—Å–ª–µ–¥–Ω—è—è*–∑–∞–ø–∏—Å—å*UTC, –í—Å–µ–≥–æ*–∑–∞–ø–∏—Å–µ–π |

### –°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`src/services/booking.js`)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ ‚Äî —É—Å–ª—É–≥–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π.

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª—É–≥:**
| –ö–ª—é—á | –ù–∞–∑–≤–∞–Ω–∏–µ | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|------|----------|--------------|
| `MEN_HAIRCUT` | –ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞ | 60 –º–∏–Ω |
| `BEARD` | –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–æ—Ä–æ–¥—ã | 30 –º–∏–Ω |
| `BUZZCUT` | –°—Ç—Ä–∏–∂–∫–∞ –ø–æ–¥ –º–∞—à–∏–Ω–∫—É | 30 –º–∏–Ω |
| `WOMEN_HAIRCUT` | –ñ–µ–Ω—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞ | 60 –º–∏–Ω |

**–°—Ç–∞—Ç—É—Å—ã:**

- `–∞–∫—Ç–∏–≤–Ω–∞` (ACTIVE)
- `–æ—Ç–º–µ–Ω–µ–Ω–∞` (CANCELLED)
- `–∏—Å–ø–æ–ª–Ω–µ–Ω–æ` (COMPLETED)
- `–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ` (BLOCKED)

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

- `getAvailableSlotsForService(serviceKey, dateStr)` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã
- `bookAppointment({ serviceKey, dateStr, timeStr, client, comment })` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å
- `cancelAppointment(id, telegramId)` ‚Äî –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π:**

- –°–∏—Å—Ç–µ–º–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **–Ω–µ –±–æ–ª–µ–µ 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞ –ª—é–±—ã–µ –¥–∞—Ç—ã**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `bookAppointment()` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getAllActiveAppointments()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –ø–æ `telegramId`, `chatId` –∏–ª–∏ `phone` (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã)
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `{ ok: false, reason: "limit_exceeded", existingCount, existingAppointments }`
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å—Ü–µ–Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`bookingScene.js`)

**–õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ—Ç–æ–≤:**

- –®–∞–≥ 15 –º–∏–Ω—É—Ç
- –£—á–∏—Ç—ã–≤–∞–µ—Ç blocked-—Å–ª–æ—Ç—ã –∏–∑ –ª–∏—Å—Ç–∞ `–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ`
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
- –ì—Ä–∞–Ω–∏—Ü—ã –¥–Ω—è –±–µ—Ä—É—Ç—Å—è –∏–∑ `config.workday` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10:00‚Äì20:00)

### –°–µ—Ä–≤–∏—Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (`src/services/reminders.js`)

**Cron-–∑–∞–¥–∞—á–∏:**

1. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ –¥–µ–Ω—å –∑–∞–ø–∏—Å–∏** ‚Äî –≤ 10:00 –ø–æ —Ç–∞–π–º–∑–æ–Ω–µ —Å–∞–ª–æ–Ω–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º –æ –∑–∞–ø–∏—Å—è—Ö –Ω–∞ –∑–∞–≤—Ç—Ä–∞ (–º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞ ~500 –º—Å).
2. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ 2 —á–∞—Å–∞** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç, –æ–∫–Ω–æ 115‚Äì125 –º–∏–Ω—É—Ç –¥–æ –Ω–∞—á–∞–ª–∞ (–º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞ ~500 –º—Å); –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ in‚Äëmemory Set `twoHourRemindedIds`.
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç, —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–∏—Å–ø–æ–ª–Ω–µ–Ω–æ" —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É—Å–ª—É–≥–∏.
4. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** ‚Äî –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC –æ—á–∏—â–∞–µ—Ç in‚Äëmemory Set `twoHourRemindedIds` (—Å–±—Ä–æ—Å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö 2‚Äë—á–∞—Å–æ–≤—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π).
5. **–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è 21 –¥–µ–Ω—å** ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 11:00 –ø–æ —Ç–∞–π–º–∑–æ–Ω–µ —Å–∞–ª–æ–Ω–∞, —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π ~500 –º—Å –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.
6. **–ù–æ—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–π** ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 02:00 –ø–æ —Ç–∞–π–º–∑–æ–Ω–µ —Å–∞–ª–æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ `sessions.json`: —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–∏ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ 30 –¥–Ω–µ–π, –∞ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ 150 –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∞–∫—Ç–∏–≤–Ω—ã–µ/–Ω–µ–¥–∞–≤–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –∏ —Ç–µ–∫—É—â–∏–µ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è).
7. **–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –≤ –∞—Ä—Ö–∏–≤** ‚Äî 1-–≥–æ —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞ –≤ 3:00 –Ω–æ—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤ –∏–∑ –ª–∏—Å—Ç–∞ `–ó–∞–ø–∏—Å–∏` –≤ –ª–∏—Å—Ç `–ó–∞–ø–∏—Å–∏_–ê—Ä—Ö–∏–≤`.

–î–ª—è –≤—Å–µ—Ö cron‚Äë–∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (—Ñ–ª–∞–≥–∏ `cronLocks`), —á—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∑–∞–¥–∞—á—É –ø–æ–≤—Ç–æ—Ä–Ω–æ, –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—É—Å–∫ –µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.

### –ë–æ—Ç (`src/bot/index.js`)

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥:**

- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/book` ‚Äî –∑–∞–ø—É—Å–∫ —Å—Ü–µ–Ω—ã –∑–∞–ø–∏—Å–∏
- `/services` ‚Äî —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- `/cancel` ‚Äî –æ—Ç–º–µ–Ω–∞ —Å—Ü–µ–Ω—ã, —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `–ú–æ–∏ –∑–∞–ø–∏—Å–∏` ‚Äî –ø–æ–∫–∞–∑ –±—É–¥—É—â–∏—Ö –∑–∞–ø–∏—Å–µ–π —Å –∫–Ω–æ–ø–∫–æ–π –æ—Ç–º–µ–Ω—ã
- `–ó–∞–ø–∏—Å–∞—Ç—å—Å—è üíá‚Äç‚ôÇÔ∏è` ‚Äî –∑–∞–ø—É—Å–∫ —Å—Ü–µ–Ω—ã –∑–∞–ø–∏—Å–∏

**Inline-–∫–Ω–æ–ø–∫–∏:**

- –û—Ç–º–µ–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏: `cancel_app:{id}`

**–°–µ—Å—Å–∏–∏:** –•—Ä–∞–Ω—è—Ç—Å—è –≤ `sessions.json` —á–µ—Ä–µ–∑ `telegraf-session-local`. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ –æ—á–∏—â–∞—é—Ç—Å—è –∑–∞—Å—Ç—Ä—è–≤—à–∏–µ —Å—Ü–µ–Ω—ã.

### –°—Ü–µ–Ω–∞ –∑–∞–ø–∏—Å–∏ (`src/bot/scenes/bookingScene.js`)

Wizard‚Äë—Å—Ü–µ–Ω–∞ —Å 6 —à–∞–≥–∞–º–∏:

1. **–í—ã–±–æ—Ä —É—Å–ª—É–≥–∏** ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —É—Å–ª—É–≥
2. **–í—ã–±–æ—Ä –¥–∞—Ç—ã** ‚Äî –∏–Ω–ª–∞–π–Ω‚Äë–∫–Ω–æ–ø–∫–∏ (–∫–∞–ª–µ–Ω–¥–∞—Ä—å). –ü—Ä–∞–≤–∏–ª–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è:

- –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞;
- –Ω–∞—á–∏–Ω–∞—è —Å 15‚Äë–≥–æ —á–∏—Å–ª–∞ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü;
- –ø—Ä–æ—à–µ–¥—à–∏–µ –¥–Ω–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (—É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–∑–æ–Ω–∞ —Å–∞–ª–æ–Ω–∞).

3. **–í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏** ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã (–ø–æ 4 –≤ —Ä—è–¥)
4. **–ò–º—è** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥
5. **–ö–æ–Ω—Ç–∞–∫—Ç** ‚Äî –∫–Ω–æ–ø–∫–∞ `–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç üì±`
6. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ( `-` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞)
7. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** ‚Äî –∏–Ω–ª–∞–π–Ω‚Äë–∫–Ω–æ–ø–∫–∏ ‚úÖ/‚ùå

–ù–∞–≤–∏–≥–∞—Ü–∏—è ¬´–ù–∞–∑–∞–¥¬ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —à–∞–≥–∞—Ö –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏. –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Å—Ç—Ä–µ–ª–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ—Å—è—Ü–µ–≤) –∏ –≤—ã–±–æ—Ä –¥–∞—Ç –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–ª—è –Ω–µ—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `.env` —á–µ—Ä–µ–∑ `dotenv`. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```javascript
config = {
  botToken: process.env.BOT_TOKEN,
  google: {
    sheetsId: process.env.GOOGLE_SHEETS_ID,
    clientEmail: process.env.GOOGLE_CLIENT_EMAIL,
    privateKey: process.env.GOOGLE_PRIVATE_KEY,
  },
  defaultTimezone: process.env.DEFAULT_TIMEZONE || "Asia/Yekaterinburg",
  managerChatId: process.env.MANAGER_CHAT_ID,
  workday: {
    startHour: 10,
    endHour: 20,
  },
};
```

---

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- **–Ø–∑—ã–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:** –†—É—Å—Å–∫–∏–π (–ø—Ä–æ–µ–∫—Ç —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É—Å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:** camelCase –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** UPPER_SNAKE_CASE –¥–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π (—Å—Ç–∞—Ç—É—Å—ã, —É—Å–ª—É–≥–∏)
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** async/await, –±–µ–∑ –∫–æ–ª–ª–±—ç–∫–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** try/catch —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ `console.error`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (booking.js) –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –±–æ—Ç–∞
- –ú–æ–∫–∏—Ä–æ–≤–∞—Ç—å Google Sheets API –¥–ª—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤

### Graceful shutdown

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–∏–≥–Ω–∞–ª—ã `SIGINT` –∏ `SIGTERM` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞.

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å:** `.env`, `credentials.json`, `sessions.json`
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:** –î–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ Editor –Ω–∞ Google Sheet
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á:** –í `.env` —Å–∏–º–≤–æ–ª—ã –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ `\n`

---

## –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏

1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ `SERVICES` –≤ `src/services/booking.js`
2. –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å—Ü–µ–Ω–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∫–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `config.workday` –≤ `src/config/index.js` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π cron-–∑–∞–¥–∞—á–∏

–î–æ–±–∞–≤–∏—Ç—å –≤ `src/services/reminders.js` –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏. –£—á–∏—Ç—ã–≤–∞—Ç—å —Ç–∞–π–º–∑–æ–Ω—É –≤ `cron.schedule()`.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Google Sheets

1. –û–±–Ω–æ–≤–∏—Ç—å `HEADERS` –≤ `src/services/googleSheets.js`
2. –û–±–Ω–æ–≤–∏—Ç—å `SHEET_NAMES` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```javascript
// –í –∫–æ–¥–µ –∏–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—É
await sheetsService.archiveOldAppointments(2); // –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤
await sheetsService.migrateExistingDataToArchive(2); // –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `ARCHIVE_MONTHS` –≤ `src/services/googleSheets.js` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2 –º–µ—Å—è—Ü–∞). –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.

---

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```powershell
# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ pm2
pm2 logs barber-bot

# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ node –Ω–∞–ø—Ä—è–º—É—é
node index.js
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π

–§–∞–π–ª `sessions.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏. –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è —Å–±—Ä–æ—Å–∞ –∑–∞—Å—Ç—Ä—è–≤—à–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏

–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é Google Sheet –∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç—å `.env`.

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:** `src/config/index.js` –∏–¥–µ–Ω—Ç–∏—á–µ–Ω `index.js` ‚Äî —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤:** –ù–µ—Ç —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
3. **–ñ—ë—Å—Ç–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã:** –ö—ç—à Google Sheets ‚Äî ~30 –º–∏–Ω—É—Ç; –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞—à–∏—Ç–æ –≤ –∫–æ–¥–µ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã TTL –≤ `src/services/googleSheets.js`
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:** –¢–æ–ª—å–∫–æ `status === "–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"` —Å—á–∏—Ç–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegraf Documentation](https://telegraf.js.org/)
- [Google Sheets API](https://developers.google.com/sheets/api)
- [node-cron](https://www.npmjs.com/package/node-cron)
- [dayjs](https://day.js.org/)

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –Ø–Ω–≤–∞—Ä—å 2026 ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–°–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 –º–µ—Å—è—Ü–∞) –∏ –∞—Ä—Ö–∏–≤ (—Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤)
  - –ù–æ–≤—ã–π –ª–∏—Å—Ç `–ó–∞–ø–∏—Å–∏_–ê—Ä—Ö–∏–≤` —Å —Ç–µ–º–∏ –∂–µ –∫–æ–ª–æ–Ω–∫–∞–º–∏, —á—Ç–æ –∏ `–ó–∞–ø–∏—Å–∏`
  - –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (–¥–∏–∞–ø–∞–∑–æ–Ω A2:Q500)
  - –ú–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –∏—â—É—Ç –≤ –æ–±–æ–∏—Ö –ª–∏—Å—Ç–∞—Ö (—Å–Ω–∞—á–∞–ª–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ, –ø–æ—Ç–æ–º –∞—Ä—Ö–∏–≤)
  - –ê–¥–º–∏–Ω—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–æ–∏—Ö –ª–∏—Å—Ç–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è:** –ï–∂–µ–º–µ—Å—è—á–Ω–æ –≤ 3:00 –Ω–æ—á–∏ (1-–≥–æ —á–∏—Å–ª–∞) –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 2 –º–µ—Å—è—Ü–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É—Å–∫–æ—Ä–µ–Ω—ã –≤ 3-5 —Ä–∞–∑ (—Å 2-5 —Å–µ–∫—É–Ω–¥ –¥–æ <1 —Å–µ–∫—É–Ω–¥—ã), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —Å–Ω–∏–∂–µ–Ω–æ —Å 20-30MB –¥–æ 5-10MB

–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- [src/services/googleSheets.js](src/services/googleSheets.js) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã —á—Ç–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `archiveOldAppointments()` –∏ `migrateExistingDataToArchive()`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫—Ä–æ–Ω-–∑–∞–¥–∞—á–∞ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏

### –Ø–Ω–≤–∞—Ä—å 2026 ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: —Ä–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `/admin` –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `/user`. –í –∞–¥–º–∏–Ω‚Äë—Ä–µ–∂–∏–º–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑–∞–Ω –∫–∞–∫ reply‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–æ–≤–ø–∞–¥–∞—é—â–∞—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π.
- –ö–ª–∞–≤–∏—à–∏ –∞–¥–º–∏–Ω–∞: `–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π`, `–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞`, `–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å (–ø–æ –∫–æ–¥—É)`, `–ó–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`, `–†–∞–∑–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`, `–ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞`, `–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º`.
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `ctx.session.mode === 'admin'` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –≤–≤–æ–¥—ã –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∞–¥–º–∏–Ω‚Äë—Ä–µ–∂–∏–º–µ.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ (preview + confirm/cancel). –†–∞—Å—Å—ã–ª–∫–∞ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é `telegramId` –∏ –∏—Å–∫–ª—é—á–∞–µ—Ç –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö.
- –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `src/services/admin.js` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∞–º–∏ (`banUser`, `unbanUser`, `isBanned`, `getBans`) –∏ —Ñ—É–Ω–∫—Ü–∏—è `broadcastToClients`.
- –†–∞—Å—à–∏—Ä–µ–Ω `src/services/googleSheets.js` –º–µ—Ç–æ–¥–æ–º `getAllClients()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—Å—ã–ª–∫–∞—Ö –∏ –ø–æ–∏—Å–∫–µ –ø–æ username).

–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- [src/bot/index.js](src/bot/index.js) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/admin` –∏ `/user`, reply‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω–∞, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleAdminAction`, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–µ–∂–∏–º–æ–º.
- [src/services/admin.js](src/services/admin.js) ‚Äî –Ω–æ–≤—ã–π —Ñ–∞–π–ª: ban/unban, broadcast.
- [src/services/googleSheets.js](src/services/googleSheets.js) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `getAllClients()`.
